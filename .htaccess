## Redireciona para o HTTPS independente do domínio
#RewriteCond %{HTTPS} off
#RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,QSA,L]
#
## Remove www. no prefixo do domínio
#RewriteCond %{HTTP_HOST} ^www\.(.*) [NC]
#RewriteRule ^ https://%1%{REQUEST_URI} [R=301,QSA,L]
#
## Redirecionar para pasta public
#RewriteEngine On
#RewriteRule ^(.*)$ public/$1 [L]

php_value upload_max_filesize 500M
php_value memory_limit 256M

Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Credentials "true"
Header set Access-Control-Allow-Methods "GET,HEAD,OPTIONS,POST,PUT,DELETE,PATCH"
Header set Access-Control-Allow-Headers "access-control-allow-origin,authorization,Content-Type,Accept,WWW-Authenticate,Origin,X-Requested-With"

<FilesMatch "\.(php|html|htm)$">
    <IfModule mod_headers>
        Header set Access-Control-Allow-Origin "*"
    </IfModule>
</FilesMatch>

<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews
    </IfModule>

    RewriteEngine On
    RewriteCond %{HTTP:Authorization} ^(.*)
    RewriteRule .* - [e=HTTP_AUTHORIZATION:%1]
    SetEnvIf Authorization .+ HTTP_AUTHORIZATION=$0

    RewriteCond %{REQUEST_FILENAME} -d [OR]
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^ ^$1 [N]

    RewriteCond %{REQUEST_URI} (\.\w+$) [NC]
    RewriteRule ^(.*)$ public/$1

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ server.php

</IfModule>
